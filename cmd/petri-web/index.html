<!doctype html>
<html>
<script>
    function updateStat(tbl, n, v) {
        var stat = document.getElementById(n)
        if (stat) {
            stat.innerHTML = v
            return
        }

        var row = tbl.insertRow()

        row.insertCell().innerHTML = n

        stat = row.insertCell()
        stat.id = n
        stat.innerHTML = v
    }

    window.onload = function () {
        var ws = new WebSocket("{{.}}")

        var tbl = document.getElementById("stats")

        ws.onmessage = function (ev) {
            var stats = JSON.parse(ev.data)
            updateStat(tbl, "Ticks", stats.Ticks)
            updateStat(tbl, "GeneExecN", stats.GeneExecN)
            for (var n in stats.ByName) {
                updateStat(tbl, n, stats.ByName[n])
            }
        }
    }
</script>
<body>
    <div>
        <table id="stats"></table>
    </div>
</body>
</html>
